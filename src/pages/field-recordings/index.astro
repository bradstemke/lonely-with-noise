---
import Layout from '../../layouts/Layout.astro';
import PostCard from '../../components/PostCard.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('field-recordings');
const sortedPosts = posts.sort((a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime());
---

<Layout title="Field Recordings - Lonely With Noise">
  <main class="category-page">
    <div class="container">
      <header class="category-header">
        <h1>Field Recordings</h1>
        <p class="category-description">
          Natural soundscapes captured in outdoor environments. From forests to streams, these
          recordings document the acoustic ecology of wild spaces.
        </p>
      </header>

      <div class="posts-list">
        {
          sortedPosts.map((post) => (
            <PostCard
              title={post.data.title}
              pubDate={post.data.pubDate}
              description={post.data.description}
              audioFile={post.data.audioFile}
              excerpt={post.data.excerpt}
              slug={post.slug}
              category="field-recordings"
            />
          ))
        }
      </div>
    </div>
  </main>
</Layout>

<style lang="scss">
  .category-page {
    min-height: 100vh;
    padding: $spacing-3xl 0 $spacing-4xl;
  }

  .category-header {
    text-align: center;
    margin-bottom: $spacing-3xl;
    padding-bottom: $spacing-xl;
    border-bottom: 1px solid $border-color;

    h1 {
      font-size: $font-size-4xl;
      margin-bottom: $spacing-md;
      text-transform: capitalize;
    }
  }

  .category-description {
    font-size: $font-size-lg;
    color: $text-secondary;
    max-width: 700px;
    margin: 0 auto;
    line-height: $line-height-relaxed;
  }

  .posts-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(min(100%, 500px), 1fr));
    gap: $spacing-xl;
  }

  @media (max-width: $breakpoint-md) {
    .category-page {
      padding: $spacing-2xl 0 $spacing-3xl;
    }

    .category-header {
      margin-bottom: $spacing-2xl;
    }

    .posts-list {
      gap: $spacing-lg;
    }
  }
</style>
